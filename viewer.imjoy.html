<config lang="json">
{
    "name": "viewer",
    "type": "web-python",
    "tags": [],
    "flags": [],
    "ui": "",
    "version": "0.1.0",
    "cover": "",
    "description": "View your image",
    "icon": "extension",
    "inputs": null,
    "outputs": null,
    "api_version": "0.1.8",
    "env": "",
    "permissions": [],
    "requirements": ["imageio"],
    "dependencies": []
}
</config>

<script lang="python">
import io
from imjoy import api
import imageio


class Plugin():
    async def setup(self):
        api.log("Viewer plugin is ready.")
        self.viewer = await api.createWindow(
            src="https://oeway.github.io/itk-vtk-viewer/",
            fullscreen=False
        )

    async def set_image(self, image):
        self.viewer.setImage(image)

    async def read_image_from_bytes(self, file_name, img_bytes):
        file = io.BytesIO(img_bytes)
        file.name = file_name
        image = imageio.imread(file)
        await api.alert("Image loaded", image)
        await self.set_image(image)


api.export(Plugin())
</script>